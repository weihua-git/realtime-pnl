# å¿«é€Ÿå¼€å§‹ - HTX æ°¸ç»­åˆçº¦ç›‘æ§ + Telegram é€šçŸ¥

## 5 åˆ†é’Ÿå¿«é€Ÿé…ç½®

### æ­¥éª¤ 1ï¼šå®‰è£…ä¾èµ–

```bash
npm install
```

### æ­¥éª¤ 2ï¼šé…ç½® HTX API

```bash
# å¤åˆ¶é…ç½®æ–‡ä»¶
cp config.example.env .env
```

ç¼–è¾‘ `.env` æ–‡ä»¶ï¼Œå¡«å…¥ä½ çš„ HTX API å¯†é’¥ï¼š

```env
HTX_ACCESS_KEY=ä½ çš„_access_key
HTX_SECRET_KEY=ä½ çš„_secret_key
```

**è·å– API å¯†é’¥ï¼š**
1. ç™»å½• HTX å®˜ç½‘
2. è¿›å…¥ API ç®¡ç†
3. åˆ›å»ºæ–°çš„ API Keyï¼ˆåªéœ€"è¯»å–"æƒé™ï¼‰

### æ­¥éª¤ 3ï¼šé…ç½® Telegram Botï¼ˆå¯é€‰ï¼‰

#### 3.1 åˆ›å»ºæœºå™¨äºº

1. åœ¨ Telegram æœç´¢ `@BotFather`
2. å‘é€ `/newbot`
3. æŒ‰æç¤ºè®¾ç½®åç§°å’Œç”¨æˆ·å
4. è·å– Bot Token

#### 3.2 è·å– Chat ID

1. åœ¨ Telegram æœç´¢ `@userinfobot`
2. å‘é€ä»»æ„æ¶ˆæ¯
3. è·å–ä½ çš„ ID

#### 3.3 é…ç½®ç¯å¢ƒå˜é‡

åœ¨ `.env` æ–‡ä»¶ä¸­æ·»åŠ ï¼š

```env
TELEGRAM_BOT_TOKEN=ä½ çš„_bot_token
TELEGRAM_CHAT_ID=ä½ çš„_chat_id
```

#### 3.4 æµ‹è¯•é€šçŸ¥

```bash
node test-telegram.js
```

å¦‚æœé…ç½®æ­£ç¡®ï¼Œä½ ä¼šåœ¨ Telegram æ”¶åˆ°æµ‹è¯•æ¶ˆæ¯ã€‚

### æ­¥éª¤ 4ï¼šè¿è¡Œç›‘æ§

#### é€‰é¡¹ 1ï¼šåŸºç¡€ç›‘å¬

```bash
npm start
```

åªç›‘å¬æŒä»“å®é™…å˜åŒ–ï¼ˆå¼€ä»“/å¹³ä»“ï¼‰ã€‚

#### é€‰é¡¹ 2ï¼šå®æ—¶ç›ˆäºç›‘æ§ï¼ˆæ¨èï¼‰

```bash
node realtime-pnl.js
```

**åŠŸèƒ½ï¼š**
- å®æ—¶æ˜¾ç¤ºæŒä»“ç›ˆäºï¼Œéšä»·æ ¼å˜åŒ–æ›´æ–°
- è‡ªåŠ¨ç®¡ç†è®¢é˜…ï¼ˆå¹³ä»“è‡ªåŠ¨å–æ¶ˆï¼Œå¼€ä»“è‡ªåŠ¨è®¢é˜…ï¼‰
- å¦‚æœé…ç½®äº† Telegramï¼Œè‡ªåŠ¨å¯ç”¨é€šçŸ¥åŠŸèƒ½
- å¦‚æœæ²¡é…ç½® Telegramï¼Œæ­£å¸¸è¿è¡Œï¼Œåªæ˜¾ç¤ºæ§åˆ¶å°è¾“å‡º

---

## é€šçŸ¥é…ç½®

### é»˜è®¤é…ç½®

- ç›ˆåˆ© â‰¥ 3% æ—¶é€šçŸ¥
- äºæŸ â‰¤ -5% æ—¶é€šçŸ¥
- æ¯ 1 å°æ—¶å‘é€æ±‡æ€»
- 5 åˆ†é’Ÿå†…ä¸é‡å¤é€šçŸ¥

### è‡ªå®šä¹‰é…ç½®

ç¼–è¾‘ `realtime-pnl.js`ï¼Œæ‰¾åˆ°ï¼š

```javascript
const notifier = new TelegramNotifier(TELEGRAM_BOT_TOKEN, TELEGRAM_CHAT_ID, {
  profitThreshold: 3,                    // ç›ˆåˆ© 3% æ—¶é€šçŸ¥
  lossThreshold: -5,                     // äºæŸ 5% æ—¶é€šçŸ¥
  timeInterval: 60 * 60 * 1000,          // 1 å°æ—¶ (60åˆ†é’Ÿ Ã— 60ç§’ Ã— 1000æ¯«ç§’)
  repeatInterval: 5 * 1000,              // 5 ç§’ (5ç§’ Ã— 1000æ¯«ç§’) - é˜²æ­¢åŒä¸€è¾¹ç•ŒçŸ­æ—¶é—´é‡å¤è§¦å‘
  enableTimeNotification: true,          // æ˜¯å¦å¯ç”¨å®šæ—¶é€šçŸ¥
  enableProfitNotification: true,        // æ˜¯å¦å¯ç”¨ç›ˆåˆ©é€šçŸ¥
  enableLossNotification: true,          // æ˜¯å¦å¯ç”¨äºæŸé€šçŸ¥
});
```

### æ—¶é—´é…ç½®è¯´æ˜

ä½¿ç”¨ç›´è§‚çš„æ ¼å¼ï¼š

```javascript
// ç§’
5 ç§’   = 5 * 1000
10 ç§’  = 10 * 1000
30 ç§’  = 30 * 1000

// åˆ†é’Ÿ
1 åˆ†é’Ÿ  = 1 * 60 * 1000
5 åˆ†é’Ÿ  = 5 * 60 * 1000
10 åˆ†é’Ÿ = 10 * 60 * 1000
30 åˆ†é’Ÿ = 30 * 60 * 1000

// å°æ—¶
1 å°æ—¶  = 60 * 60 * 1000
2 å°æ—¶  = 120 * 60 * 1000
```

---

## å¸¸è§åœºæ™¯

### åœºæ™¯ 1ï¼šåªæƒ³è¦ç›ˆåˆ©é€šçŸ¥

```javascript
const notifier = new TelegramNotifier(TELEGRAM_BOT_TOKEN, TELEGRAM_CHAT_ID, {
  profitThreshold: 5,                    // ç›ˆåˆ© 5% é€šçŸ¥
  timeInterval: 60 * 60 * 1000,          // 1 å°æ—¶
  repeatInterval: 10 * 60 * 1000,        // 10 åˆ†é’Ÿ
  enableProfitNotification: true,
  enableLossNotification: false,         // ç¦ç”¨äºæŸé€šçŸ¥
  enableTimeNotification: false,         // ç¦ç”¨å®šæ—¶é€šçŸ¥
});
```

### åœºæ™¯ 2ï¼šé¢‘ç¹é€šçŸ¥ï¼ˆçŸ­çº¿äº¤æ˜“ï¼‰

```javascript
const notifier = new TelegramNotifier(TELEGRAM_BOT_TOKEN, TELEGRAM_CHAT_ID, {
  profitThreshold: 1,                    // ç›ˆåˆ© 1% å°±é€šçŸ¥
  lossThreshold: -2,                     // äºæŸ 2% å°±é€šçŸ¥
  timeInterval: 10 * 60 * 1000,          // 10 åˆ†é’Ÿå®šæ—¶é€šçŸ¥
  repeatInterval: 3 * 1000,              // 3 ç§’é˜²é‡å¤
});
```

### åœºæ™¯ 3ï¼šé•¿çº¿æŒä»“ï¼ˆå‡å°‘é€šçŸ¥ï¼‰

```javascript
const notifier = new TelegramNotifier(TELEGRAM_BOT_TOKEN, TELEGRAM_CHAT_ID, {
  profitThreshold: 10,                   // ç›ˆåˆ© 10% æ‰é€šçŸ¥
  lossThreshold: -10,                    // äºæŸ 10% æ‰é€šçŸ¥
  timeInterval: 240 * 60 * 1000,         // 4 å°æ—¶å®šæ—¶é€šçŸ¥
  repeatInterval: 10 * 1000,             // 10 ç§’é˜²é‡å¤
});
```

### åœºæ™¯ 4ï¼šåªè¦å®šæ—¶æ±‡æ€»

```javascript
const notifier = new TelegramNotifier(TELEGRAM_BOT_TOKEN, TELEGRAM_CHAT_ID, {
  timeInterval: 60 * 60 * 1000,          // 1 å°æ—¶æ±‡æ€»
  enableProfitNotification: false,       // ç¦ç”¨ç›ˆåˆ©é€šçŸ¥
  enableLossNotification: false,         // ç¦ç”¨äºæŸé€šçŸ¥
  enableTimeNotification: true,          // åªè¦å®šæ—¶é€šçŸ¥
});
```

---

## é€šçŸ¥ç¤ºä¾‹

### ç›ˆåˆ©é€šçŸ¥

```
ğŸ‰ ç›ˆåˆ©æé†’

ğŸŸ¢ ETH-USDT ç©ºä»“

ğŸ“Š æŒä»“ä¿¡æ¯
æŒä»“é‡: 21 å¼  (0.2100 ETH)
æŒä»“ä»·å€¼: 479.22 USDT
ä¿è¯é‡‘: 47.93 USDT

ğŸ’° ä»·æ ¼ä¿¡æ¯
æœ€æ–°ä»·: 2282.00 USDT
å¼€ä»“ä»·: 2273.76 USDT
ä»·å·®: 8.24 USDT

ğŸ“ˆ ç›ˆäºæƒ…å†µ
æœªå®ç°ç›ˆäº: 1.7304 USDT
æ”¶ç›Šç‡: 3.61%

â° 2026/2/4 12:00:00
```

### äºæŸè­¦å‘Š

```
âš ï¸ äºæŸè­¦å‘Š

ğŸ”´ BTC-USDT å¤šä»“

ğŸ“Š æŒä»“ä¿¡æ¯
æŒä»“é‡: 10 å¼  (0.0100 BTC)
æŒä»“ä»·å€¼: 1050.00 USDT
ä¿è¯é‡‘: 105.00 USDT

ğŸ’° ä»·æ ¼ä¿¡æ¯
æœ€æ–°ä»·: 105000.00 USDT
å¼€ä»“ä»·: 110000.00 USDT
ä»·å·®: -5000.00 USDT

ğŸ“ˆ ç›ˆäºæƒ…å†µ
æœªå®ç°ç›ˆäº: -50.00 USDT
æ”¶ç›Šç‡: -47.62%

â° 2026/2/4 12:00:00
```

### å®šæ—¶æ±‡æ€»

```
ğŸ“Š æŒä»“å®šæ—¶æ±‡æ€»

ğŸŸ¢ æ€»ä½“æƒ…å†µ
æ€»ç›ˆäº: 2.50 USDT
æ€»æ”¶ç›Šç‡: 5.21%
æ€»ä¿è¯é‡‘: 47.93 USDT
æ€»æŒä»“ä»·å€¼: 479.22 USDT

ğŸ“‹ å„æŒä»“è¯¦æƒ…
ğŸŸ¢ ETH-USDT ç©º: 2.50 USDT (5.21%)

â° 2026/2/4 12:00:00
```

---

## æ•…éšœæ’æŸ¥

### é—®é¢˜ 1ï¼šæ”¶ä¸åˆ° Telegram é€šçŸ¥

**æ£€æŸ¥ï¼š**
```bash
# è¿è¡Œæµ‹è¯•è„šæœ¬
node test-telegram.js
```

**å¸¸è§åŸå› ï¼š**
- Bot Token é”™è¯¯
- Chat ID é”™è¯¯
- æ²¡æœ‰ç»™æœºå™¨äººå‘é€è¿‡æ¶ˆæ¯ï¼ˆå¿…é¡»å…ˆç‚¹ Startï¼‰
- ç½‘ç»œæ— æ³•è®¿é—® Telegram API

### é—®é¢˜ 2ï¼šé€šçŸ¥å¤ªé¢‘ç¹

**è§£å†³ï¼š**
- å¢å¤§ `repeatInterval`ï¼ˆé‡å¤é—´éš”ï¼‰
- æé«˜ `profitThreshold` å’Œ `lossThreshold`ï¼ˆé˜ˆå€¼ï¼‰

### é—®é¢˜ 3ï¼šæ²¡æœ‰å®šæ—¶é€šçŸ¥

**æ£€æŸ¥ï¼š**
- `enableTimeNotification` æ˜¯å¦ä¸º `true`
- æ˜¯å¦æœ‰æŒä»“
- æ˜¯å¦è¾¾åˆ° `timeInterval` æ—¶é—´

### é—®é¢˜ 4ï¼šè®¡ç®—ç»“æœä¸å¯¹

**æŸ¥çœ‹ï¼š**
- `å¸¸è§é—®é¢˜è§£ç­”.md` - è®¡ç®—å…¬å¼è¯´æ˜
- è¿è¡Œ `node realtime-pnl-debug.js` æŸ¥çœ‹è¯¦ç»†è®¡ç®—

---

## åå°è¿è¡Œ

### ä½¿ç”¨ nohup

```bash
nohup node realtime-pnl.js > pnl.log 2>&1 &
```

### ä½¿ç”¨ screen

```bash
screen -S htx
node realtime-pnl.js
# æŒ‰ Ctrl+A+D é€€å‡º
```

### ä½¿ç”¨ pm2ï¼ˆæ¨èï¼‰

```bash
# å®‰è£… pm2
npm install -g pm2

# å¯åŠ¨
pm2 start realtime-pnl.js --name htx-monitor

# æŸ¥çœ‹æ—¥å¿—
pm2 logs htx-monitor

# åœæ­¢
pm2 stop htx-monitor

# é‡å¯
pm2 restart htx-monitor

# å¼€æœºè‡ªå¯
pm2 startup
pm2 save
```

---

## æ–‡æ¡£ç´¢å¼•

- `README.md` - å®Œæ•´æ–‡æ¡£
- `Telegramé…ç½®æŒ‡å—.md` - Telegram è¯¦ç»†é…ç½®
- `å¸¸è§é—®é¢˜è§£ç­”.md` - é—®é¢˜è§£ç­”å’Œè®¡ç®—è¯´æ˜
- `ä½¿ç”¨æŒ‡å—.md` - è¯¦ç»†ä½¿ç”¨è¯´æ˜
- `æŒä»“ç›‘å¬è¯´æ˜.md` - æŠ€æœ¯åŸç†

---

## éœ€è¦å¸®åŠ©ï¼Ÿ

1. æŸ¥çœ‹ç›¸å…³æ–‡æ¡£
2. è¿è¡Œæµ‹è¯•è„šæœ¬
3. æŸ¥çœ‹é”™è¯¯æ—¥å¿—
4. æ£€æŸ¥ç½‘ç»œè¿æ¥

ç¥äº¤æ˜“é¡ºåˆ©ï¼ğŸš€
