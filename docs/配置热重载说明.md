# ğŸ”„ é…ç½®çƒ­é‡è½½è¯´æ˜

## é—®é¢˜æè¿°

ä¹‹å‰çš„å®ç°ä¸­ï¼Œé…ç½®çƒ­é‡è½½æ—¶æ—¥å¿—æ˜¾ç¤ºçš„ä»·æ ¼ç›®æ ‡ä¸æ˜¯æœ€æ–°çš„ã€‚

**ç¤ºä¾‹**ï¼š
- é…ç½®æ–‡ä»¶ï¼š`targetPrice: 2120`
- æ—¥å¿—æ˜¾ç¤ºï¼š`ETH-USDT: è¾¾åˆ° 2200 USDT`

## é—®é¢˜åŸå› 

åœ¨ `realtime-pnl.js` ä¸­ï¼Œæœ‰äº›å‡½æ•°ä½¿ç”¨äº†æ—§çš„ `marketConfig` å¯¹è±¡å¼•ç”¨ï¼š

```javascript
// âŒ é”™è¯¯ï¼šä½¿ç”¨æ—§çš„å¼•ç”¨
if (marketConfig.priceTargets?.enabled) {
  marketConfig.priceTargets.targets.forEach(t => {
    console.log(`${t.symbol}: ${t.targetPrice}`);
  });
}
```

é…ç½®çƒ­é‡è½½æ—¶ï¼Œè™½ç„¶ `configManager` å†…éƒ¨çš„é…ç½®æ›´æ–°äº†ï¼Œä½†æ˜¯ `marketConfig` è¿™ä¸ªå¯¼å‡ºçš„å¯¹è±¡å¼•ç”¨æ²¡æœ‰æ›´æ–°ã€‚

## è§£å†³æ–¹æ¡ˆ

ä¿®æ”¹æ‰€æœ‰éœ€è¦è¯»å–é…ç½®çš„åœ°æ–¹ï¼Œæ”¹ä¸ºä» `configManager.getConfig()` è·å–æœ€æ–°é…ç½®ï¼š

```javascript
// âœ… æ­£ç¡®ï¼šè·å–æœ€æ–°é…ç½®
const currentConfig = configManager.getConfig();
if (currentConfig.priceTargets?.enabled) {
  currentConfig.priceTargets.targets.forEach(t => {
    console.log(`${t.symbol}: ${t.targetPrice}`);
  });
}
```

## ä¿®æ”¹çš„å‡½æ•°

### 1. printCurrentConfig()

**ä¿®æ”¹å‰**ï¼š
```javascript
if (marketConfig.priceTargets?.enabled) {
  marketConfig.priceTargets.targets.forEach(t => {
    // ...
  });
}
```

**ä¿®æ”¹å**ï¼š
```javascript
const currentConfig = configManager.getConfig();
if (currentConfig.priceTargets?.enabled) {
  currentConfig.priceTargets.targets.forEach(t => {
    // ...
  });
}
```

### 2. checkPriceTargets()

**ä¿®æ”¹å‰**ï¼š
```javascript
async function checkPriceTargets(contractCode, currentPrice) {
  if (!marketConfig.priceTargets?.targets) return;
  
  for (const target of marketConfig.priceTargets.targets) {
    // ...
  }
}
```

**ä¿®æ”¹å**ï¼š
```javascript
async function checkPriceTargets(contractCode, currentPrice) {
  const currentConfig = configManager.getConfig();
  if (!currentConfig.priceTargets?.targets) return;
  
  for (const target of currentConfig.priceTargets.targets) {
    // ...
  }
}
```

### 3. analyzeTrend()

**ä¿®æ”¹å‰**ï¼š
```javascript
if (marketConfig.priceTargets?.enabled) {
  await checkPriceTargets(contractCode, currentPrice);
}
```

**ä¿®æ”¹å**ï¼š
```javascript
const currentConfig = configManager.getConfig();
if (currentConfig.priceTargets?.enabled) {
  await checkPriceTargets(contractCode, currentPrice);
}
```

## éªŒè¯æ–¹æ³•

### 1. å¯åŠ¨ç›‘æ§ç¨‹åº

```bash
npm start
```

### 2. æŸ¥çœ‹åˆå§‹é…ç½®

æ—¥å¿—ä¼šæ˜¾ç¤ºå½“å‰é…ç½®ï¼š

```
ğŸ’¡ è¡Œæƒ…ç›‘æ§é…ç½®ï¼š
   ä»·æ ¼ç›®æ ‡ç›‘æ§: âœ… å¼€å¯
      - ETH-USDT: è¾¾åˆ° 2120 USDT
```

### 3. ä¿®æ”¹é…ç½®

é€šè¿‡ Web é¡µé¢æˆ–ç›´æ¥ç¼–è¾‘ `data/config.json`ï¼Œå°†ç›®æ ‡ä»·æ”¹ä¸º 2300ã€‚

### 4. ç­‰å¾…çƒ­é‡è½½

10 ç§’å†…ä¼šçœ‹åˆ°ï¼š

```
ğŸ”„ æ£€æµ‹åˆ°é…ç½®å˜åŒ–ï¼Œæ­£åœ¨åº”ç”¨æ–°é…ç½®...

âœ… æ–°é…ç½®å·²åº”ç”¨

ğŸ’¡ è¡Œæƒ…ç›‘æ§é…ç½®ï¼š
   ä»·æ ¼ç›®æ ‡ç›‘æ§: âœ… å¼€å¯
      - ETH-USDT: è¾¾åˆ° 2300 USDT  â† æ­£ç¡®æ˜¾ç¤ºæ–°é…ç½®
```

### 5. éªŒè¯åŠŸèƒ½

å½“ ETH ä»·æ ¼è¾¾åˆ° 2300 æ—¶ï¼Œä¼šè§¦å‘é€šçŸ¥ï¼ˆè€Œä¸æ˜¯ 2120ï¼‰ã€‚

## æœ€ä½³å®è·µ

### 1. å§‹ç»ˆä½¿ç”¨ configManager.getConfig()

åœ¨éœ€è¦è¯»å–é…ç½®çš„åœ°æ–¹ï¼Œå§‹ç»ˆä½¿ç”¨ï¼š

```javascript
const currentConfig = configManager.getConfig();
```

è€Œä¸æ˜¯ç›´æ¥ä½¿ç”¨å¯¼å‡ºçš„ `marketConfig` å¯¹è±¡ã€‚

### 2. å±€éƒ¨å˜é‡çš„æ›´æ–°

å¯¹äºé¢‘ç¹ä½¿ç”¨çš„é…ç½®ï¼ˆå¦‚ `watchContracts`ã€`priceChangeConfig`ï¼‰ï¼Œåœ¨çƒ­é‡è½½æ—¶æ›´æ–°å±€éƒ¨å˜é‡ï¼š

```javascript
configManager.on('configChanged', (newConfig) => {
  watchContracts = newConfig.watchContracts;
  priceChangeConfig = newConfig.priceChangeConfig;
});
```

### 3. ä¸è¦ç¼“å­˜é…ç½®å¯¹è±¡

âŒ é”™è¯¯ï¼š
```javascript
const targets = marketConfig.priceTargets.targets;
// åç»­ä½¿ç”¨ targetsï¼Œå¯èƒ½æ˜¯æ—§æ•°æ®
```

âœ… æ­£ç¡®ï¼š
```javascript
const currentConfig = configManager.getConfig();
const targets = currentConfig.priceTargets.targets;
// æ¯æ¬¡éƒ½è·å–æœ€æ–°é…ç½®
```

## é…ç½®æ›´æ–°æµç¨‹

```
ç”¨æˆ·ä¿®æ”¹é…ç½®
    â†“
ä¿å­˜åˆ° config.json
    â†“
ConfigManager æ£€æµ‹æ–‡ä»¶å˜åŒ–ï¼ˆæ¯ 10 ç§’ï¼‰
    â†“
ConfigManager.config æ›´æ–°
    â†“
è§¦å‘ configChanged äº‹ä»¶
    â†“
realtime-pnl.js ç›‘å¬åˆ°äº‹ä»¶
    â†“
æ›´æ–°å±€éƒ¨å˜é‡ï¼ˆwatchContracts, priceChangeConfigï¼‰
    â†“
é‡æ–°åˆå§‹åŒ–ï¼ˆpriceTracker, notifierï¼‰
    â†“
è°ƒç”¨ printCurrentConfig()
    â†“
ä» configManager.getConfig() è·å–æœ€æ–°é…ç½®
    â†“
æ˜¾ç¤ºæ­£ç¡®çš„é…ç½®ä¿¡æ¯
```

## æ³¨æ„äº‹é¡¹

### 1. é‡å¯ç¨‹åº

å¦‚æœä¿®æ”¹äº†ä»£ç ï¼Œéœ€è¦é‡å¯ç›‘æ§ç¨‹åºï¼š

```bash
# åœæ­¢ç¨‹åºï¼ˆCtrl+Cï¼‰
# é‡æ–°å¯åŠ¨
npm start
```

### 2. é…ç½®æ–‡ä»¶æ ¼å¼

ç¡®ä¿ `data/config.json` æ ¼å¼æ­£ç¡®ï¼š

```bash
# éªŒè¯ JSON æ ¼å¼
cat data/config.json | jq .
```

### 3. æ—¥å¿—è¾“å‡º

é…ç½®çƒ­é‡è½½æ—¶ä¼šè¾“å‡ºè¯¦ç»†æ—¥å¿—ï¼Œæ³¨æ„æŸ¥çœ‹ï¼š

- `ğŸ”„ æ£€æµ‹åˆ°é…ç½®å˜åŒ–` - æ£€æµ‹åˆ°æ–‡ä»¶å˜åŒ–
- `âœ… æ–°é…ç½®å·²åº”ç”¨` - é…ç½®å·²é‡è½½
- `ğŸ’¡ è¡Œæƒ…ç›‘æ§é…ç½®` - æ˜¾ç¤ºå½“å‰é…ç½®

## æ€»ç»“

ä¿®å¤åï¼Œé…ç½®çƒ­é‡è½½èƒ½æ­£ç¡®è¯»å–å’Œåº”ç”¨æœ€æ–°é…ç½®ï¼š

- âœ… æ—¥å¿—æ˜¾ç¤ºæ­£ç¡®çš„é…ç½®å€¼
- âœ… ä»·æ ¼ç›®æ ‡ç›‘æ§ä½¿ç”¨æœ€æ–°é…ç½®
- âœ… é€šçŸ¥è§¦å‘ä½¿ç”¨æœ€æ–°é…ç½®
- âœ… æ— éœ€é‡å¯ç¨‹åº

**ç°åœ¨é…ç½®çƒ­é‡è½½å®Œå…¨æ­£å¸¸å·¥ä½œäº†ï¼** ğŸ‰
